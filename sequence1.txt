@startuml

actor User

activate User
activate UI
User -> UI: Click "Start"
note right: assuming user already selected soundfiles to process
UI -> AudioFileManager: CheckForOvermodulation
activate AudioFileManager
AudioFileManager -> AudioFile: WouldFit
note right: for each open AudioFile
activate AudioFile
AudioFileManager <-- AudioFile: true
note right: assuming all goes well
deactivate AudioFile
UI <-- AudioFileManager: LinkedList<string>
note right: all files that returned false
deactivate AudioFileManager
UI -> AudioFileManager: AdjustFiles
activate AudioFileManager
AudioFileManager -> AudioFile: AdjustSamples
note right: for each open AudioFile
activate AudioFile
AudioFile -> AudioFile: WouldFit
AudioFile <-- AudioFile: true
note right: exception if false
AudioFile -> WaveSound: DecodeSamples
activate WaveSound
WaveSound -> WaveSound: Read
note right: called multiple times
AudioFile <-- WaveSound: samples
deactivate WaveSound
AudioFile -> AudioFile: AdjustmentFormula
AudioFile -> WaveSound: EncodeSamples
activate WaveSound
AudioFile <-- WaveSound: buffer
deactivate WaveSound
AudioFileManager <-- AudioFile
deactivate AudioFile
UI <-- AudioFileManager
User <-- UI
deactivate AudioFileManager
deactivate UI
deactivate User

@enduml